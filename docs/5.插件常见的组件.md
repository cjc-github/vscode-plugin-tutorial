# 插件常见的组件

这个文档介绍了vscode中常见的组件

官网：<https://code.visualstudio.com/api/references/vscode-api>

参考文献：
- <https://github.com/Liiked/VS-Code-Extension-Doc-ZH>
- <https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/>


<br/>


目录：

- [插件常见的组件](#插件常见的组件)
- [一. 布局](#一-布局)
  - [1.1 通知](#11-通知)
  - [1.2 进度条](#12-进度条)
- [二、配置](#二配置)
- [三、键位绑定](#三键位绑定)
- [四、菜单](#四菜单)
- [五、数据存储](#五数据存储)
- [命令行执行](#命令行执行)





# 一. 布局

参考文档：<https://code.visualstudio.com/api/ux-guidelines/overview>


VS code界面布局可以分成2个部分：Container（容器）和 Items（内容）。

- 容器： 容器（Containers）是界面中固定的区域框架，是界面的结构性区域，提供特定的功能框架。
- 内容： 内容（Items）则是容器（Containers）里填充的具体功能或信息，是容器中具体的、可交互的功能单元。

<br>

VS Code界面的容器如下，由Activity Bar （活动栏）、Primary Sidebar（主侧边栏）、Editor（编辑区域）、Secondary Sidebar（辅助边栏/次侧边栏）、Status Bar（状态栏）、Panel（面板）组成。

![image-20260112172523842](5.%E6%8F%92%E4%BB%B6%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BB%84%E4%BB%B6.assets/image-20260112172523842.png)


容器栏介绍：
- 活动栏: 提供视图图标，如资源管理器、搜索、源代码管理、扩展等，用于切换主侧边栏的视图
- 主侧边栏: 显示视图 (Views)，例如文件树、搜索结果的列表、Git 面板等。其内容随活动栏选中的项目变化
- 辅助边栏/次侧边栏: 功能与主侧边栏类似， 通常作为辅助显示区域，用户可以将终端等问题视图拖动到此处
- 编辑器区域: 代码编辑的核心区域，可同时打开多个编辑器标签页，支持分组（Editor Groups）和分屏
- 面板: 底部的视图容器，集成了终端、问题列表、输出、调试控制台等
- 状态栏：底部的信息栏，显示状态项，如 Git 分支、错误警告数、行号、编码格式等


![alt text](./5.%E6%8F%92%E4%BB%B6%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BB%84%E4%BB%B6.assets/image.png)

常见组件介绍：
- 视图 (View)：在视图容器（如侧边栏、面板）中呈现内容的核心单元，主要有树形视图、欢迎视图、Webview视图三种形式。用户可将视图拖拽到界面的其他区域（如从侧边栏移到面板）
- 视图工具栏 (View Toolbar)：附加在特定视图上的工具栏，其上的操作按钮仅作用于当前所在的视图
- 侧边栏工具栏 (Sidebar Toolbar)：作用于整个视图容器的工具栏。例如，在资源管理器视图的顶部，提供“新建文件”、“新建文件夹”等容器级操作
- 编辑器工具栏 (Editor Toolbar)：出现在编辑器区域顶部的工具栏，提供与当前打开的文件或编辑器类型强相关的操作，如“格式化文档”
- 面板工具栏 (Panel Toolbar)：位于面板区域的工具栏，其显示的操作与面板中当前选中的视图标签页紧密相关。例如，切换到“终端”视图和“问题”视图，面板工具栏的按钮会不同
- 状态栏项目 (Status Bar Item)：显示在窗口底部状态栏上的信息项。左侧项目通常与整个工作区相关（如Git分支），右侧项目则与当前活动文件相关（如行号、编码格式）


接下来就介绍一下vscode中常见布局相关的功能

参考文献：

<https://rackar.github.io/vscode-ext-doccn/extension-capabilities/common-capabilities.html>

## 1.1 通知

几乎所有的插件都需要在某些时候为用户提示信息。VS Code提供了3个API来展示不同重要程度的信息：

- window.showInformationMessage
- window.showWarningMessage
- window.showErrorMessage

## 1.2 进度条

使用vscode.Progress将处理进度报告给用户。

通过ProgressLocation选项，进度可以显示在不同的区域：
- 显示在通知区
- 显示在源控制视图
- VS Code窗口中的通用进度条位置


# 二、配置
插件需要在contributes.configuration发布内容配置点中填写有关的配置，你可以workspace.getConfigurationAPI中阅读有关内容

# 三、键位绑定

插件可以添加自定义键位映射，在contributes.keybindings和键位绑定中了解更多有关内容

# 四、菜单

插件可以自定义上下文菜单项，菜单会根据用户右击VS Code UI的不同位置而各不相同。查看更多contributes.menus发布内容配置


# 五、数据存储

VS Code中有三种数据储存方式：

- `ExtensionContext.workspaceState`：键值对组成的工作区数据。当同一个工作区再次打开时会重新取出数据。
- `ExtensionContext.globalState`：键值对组成的全局数据。当插件激活时会再次取出这些数据。
- `ExtensionContext.storagePath`：指向你的插件可以读写的本地文件夹的路径。如果你要储存比较大的数据，这是一个非常好的选择。
- `ExtensionContext.globalStoragePath`：指向你的插件可以读写的本地存储的路径。如果你要存储所有工作区内的大文件，这时一个非常好的选择


# 命令行执行

VS Code中有两种命令行执行方式：

- 异步spwan方法
- 同步exec方法